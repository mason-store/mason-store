(function(e,t){"object"===typeof exports&&"object"===typeof module?module.exports=t():"function"===typeof define&&define.amd?define([],t):"object"===typeof exports?exports["mason-store"]=t():e["mason-store"]=t()})("undefined"!==typeof self?self:this,(function(){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)i.d(a,o,function(t){return e[t]}.bind(null,o));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s="fb15")}({"251c":function(e,t,i){"use strict";i("954c")},8875:function(e,t,i){var a,o,n;(function(i,s){o=[],a=s,n="function"===typeof a?a.apply(t,o):a,void 0===n||(e.exports=n)})("undefined"!==typeof self&&self,(function(){function e(){var t=Object.getOwnPropertyDescriptor(document,"currentScript");if(!t&&"currentScript"in document&&document.currentScript)return document.currentScript;if(t&&t.get!==e&&document.currentScript)return document.currentScript;try{throw new Error}catch(m){var i,a,o,n=/.*at [^(]*\((.*):(.+):(.+)\)$/gi,s=/@([^@]*):(\d+):(\d+)\s*$/gi,l=n.exec(m.stack)||s.exec(m.stack),r=l&&l[1]||!1,c=l&&l[2]||!1,d=document.location.href.replace(document.location.hash,""),p=document.getElementsByTagName("script");r===d&&(i=document.documentElement.outerHTML,a=new RegExp("(?:[^\\n]+?\\n){0,"+(c-2)+"}[^<]*<script>([\\d\\D]*?)<\\/script>[\\d\\D]*","i"),o=i.replace(a,"$1").trim());for(var u=0;u<p.length;u++){if("interactive"===p[u].readyState)return p[u];if(p[u].src===r)return p[u];if(r===d&&p[u].innerHTML&&p[u].innerHTML.trim()===o)return p[u]}return null}}return e}))},"954c":function(e,t,i){},"9d7d":function(e,t,i){},a623:function(e,t,i){},bb3a:function(e,t,i){"use strict";i("a623")},c4ea:function(e,t,i){},e667:function(e,t,i){"use strict";i("9d7d")},fb15:function(e,t,i){"use strict";if(i.r(t),i.d(t,"install",(function(){return te})),i.d(t,"Integration",(function(){return ee})),"undefined"!==typeof window){var a=window.document.currentScript,o=i("8875");a=o(),"currentScript"in document||Object.defineProperty(document,"currentScript",{get:o});var n=a&&a.src.match(/(.+\/)[^/]+\.js(\?.*)?$/);n&&(i.p=n[1])}var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"general"},[i("div",{staticClass:"general-seek"},[i("div",{staticClass:"seek-buttons"},[e._l(e.modelConf.buttonConf,(function(t,a){return i("span",{key:a},["main"===t.type&&t.isShow?i("el-button",{attrs:{size:"mini",type:"primary",plain:"",icon:t.icon?t.icon:"el-icon-plus"},on:{click:function(i){return e.onDialogForm(!1,t)}}},[e._v(" "+e._s(t.label)+" ")]):e._e()],1)})),e._t("mainbuts")],2),i("el-form",{staticClass:"seek-condition",attrs:{inline:!0,model:e.seekData}},[e._l(e.modelConf.seekConfig,(function(t,a){return i("div",{key:a,staticClass:"seek-form-box"},["date"===t.type?i("el-form-item",{attrs:{label:t.label}},[i("el-date-picker",{attrs:{type:t.dateType,placeholder:"选择"+t.label,size:"mini","range-separator":"至","start-placeholder":"开始"+t.label,"end-placeholder":"结束"+t.label,"picker-options":t.pickerOptions,"value-format":t.format},model:{value:e.seekData[t.prop],callback:function(i){e.$set(e.seekData,t.prop,i)},expression:"seekData[item.prop]"}})],1):e._e(),"cascader"===t.type?i("el-form-item",{attrs:{label:t.label}},[i("el-cascader",{attrs:{clearable:!0,size:"mini",placeholder:"请选择"+t.label,options:t.option,filterable:""},model:{value:e.seekData[t.prop],callback:function(i){e.$set(e.seekData,t.prop,i)},expression:"seekData[item.prop]"}})],1):"text"===t.type?i("el-form-item",{attrs:{label:t.label}},[i("el-input",{attrs:{clearable:"","show-word-limit":"",size:"mini",maxlength:t.maxlength,placeholder:"请输入"+t.label},model:{value:e.seekData[t.prop],callback:function(i){e.$set(e.seekData,t.prop,i)},expression:"seekData[item.prop]"}})],1):"select"===t.type?i("el-form-item",{attrs:{label:t.label}},[i("el-select",{attrs:{placeholder:"请选择"+t.label,size:"mini",filterable:"",clearable:!0},model:{value:e.seekData[t.prop],callback:function(i){e.$set(e.seekData,t.prop,i)},expression:"seekData[item.prop]"}},e._l(t.option,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1):e._e()],1)})),i("el-form-item",{staticClass:"seek-form-box"},e._l(e.modelConf.buttonConf,(function(t,a){return i("span",{key:a},["search"===t.type&&t.isShow?i("el-button",{attrs:{size:"mini",type:"primary",plain:"",icon:t.icon?t.icon:"el-icon-search",loading:e.isReqLoading},on:{click:function(i){return e.seekDataFn(t)}}},[e._v(" "+e._s(t.label)+" ")]):e._e()],1)})),0)],2)],1),i("div",{staticClass:"general-table"},[i("div",{staticClass:"table"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:!0,size:"mini","max-height":e.modelConf.viewConf.tableMaxHeight},on:{"selection-change":e.selectFn}},[i("el-table-column",{attrs:{type:"selection",width:"40"}}),e._l(e.modelConf.tableConfig,(function(t,a){return i("el-table-column",{key:a,attrs:{"show-overflow-tooltip":"",sortable:t.isSortable,label:t.label,width:t.width,prop:t.prop,fixed:t.fiexd},scopedSlots:e._u([{key:"default",fn:function(o){return["tag"==t.type?i("div",e._l(o.row[t.prop],(function(t,a){return i("el-tag",{key:a,staticClass:"common-table-tag",attrs:{type:t.type}},[e._v(" "+e._s(t.label)+" ")])})),1):"img"==t.type?i("el-image",{staticStyle:{width:"100%",height:"auto"},attrs:{src:o.row[t.prop][0],fit:"contain"}}):"switch"==t.type?i("el-switch",{key:a,staticStyle:{display:"block"},attrs:{"active-text":t.activeText,"inactive-text":t.inactiveText,"active-value":t.activeValue[0].code,"inactive-value":t.inactiveValue[0].code,"active-color":t.activeColor||"#13ce66","inactive-color":t.inactiveColor||"#ff4949"},on:{change:function(i){return e.changeStatus(o.row,t)}},model:{value:o.row[t.prop],callback:function(i){e.$set(o.row,t.prop,i)},expression:"scope.row[item.prop]"}}):"operation"===t.type?i("div",[e._l(e.modelConf.buttonConf,(function(t,a){return i("div",{key:a,staticClass:"table-but"},["table"===t.type&&t.isShow(o.row)?i("div",{attrs:{placement:"top",effect:"light"}},[i("el-button",{attrs:{icon:t.icon,type:"primary",size:"mini",plain:""},on:{click:function(i){return e.onDialogForm(o.row,t)}}},[e._v(" "+e._s(t.label)+" ")])],1):e._e()])})),e._t("operation",null,{row:o.row})],2):i("div",[e._v(e._s(o.row[t.prop]))])]}}],null,!0)})}))],2),i("div",{staticClass:"page"},[i("el-pagination",{attrs:{"current-page":e.seekData.pageNum,"page-sizes":[10,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),i("el-dialog",{attrs:{title:e.remindWinConf.title,visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t}}},[i("span",[e._v(e._s(e.remindWinConf.msg))]),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{size:"mini"},on:{click:e.cancelDeleteFn}},[e._v(" 取消 ")]),i("el-button",{attrs:{type:"primary",plain:"",size:"mini",disabled:e.isReqLoading,loading:e.isReqLoading},on:{click:function(t){return e.confirmDeleteFn()}}},[e._v(" 确定 ")])],1)])],1)]),i("div",{staticClass:"general-window"},[i("WindowModule",{attrs:{"show-window":e.isShowWindow,"form-data":e.dialogFormData,"add-or-set":e.addOrSet,modelConf:e.modelConf},on:{winCancelFn:e.getWindowCancelFn,setTableList:e.setTableList},scopedSlots:e._u([{key:"dialogForm",fn:function(t){return[e._t("dialogForm",null,{formData:t.formData})]}},{key:"dialogButton",fn:function(t){return[e._t("dialogButton",null,{formData:t.formData})]}}],null,!0)})],1)])},l=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"general-dialog"},[i("el-dialog",{attrs:{width:"80%",title:e.winText,"destroy-on-close":!0,visible:e.showFormBox,"close-on-click-modal":!1},on:{"update:visible":function(t){e.showFormBox=t},close:e.closeFn}},[i("div",[i("el-form",{ref:"winFormData",staticClass:"seek-ruleForm",attrs:{"label-width":e.modelConf.viewConf.formLabelWidth,model:e.winFormData,rules:e.modelConf.formRules}},[i("el-row",[e._l(e.modelConf.formConfig,(function(t,a){return i("el-col",{key:a,attrs:{span:t.span}},["form-title"===t.type?i("div",[i("el-divider",[e._v(e._s(t.label))])],1):e._e(),"text"===t.type||"textarea"===t.type?i("el-form-item",{attrs:{label:t.label,prop:"新增"===e.winText&&!1===t.isAddPermit||"编辑"===e.winText&&!1===t.isEditPermit?"":t.prop}},[i("el-input",{attrs:{placeholder:"请输入"+t.label,"show-word-limit":"",clearable:"",size:"mini",type:t.type?t.type:"text",maxlength:t.maxlength,disabled:"新增"===e.winText&&!1===t.isAddPermit||"编辑"===e.winText&&!1===t.isEditPermit},model:{value:e.winFormData[t.prop],callback:function(i){e.$set(e.winFormData,t.prop,i)},expression:"winFormData[item.prop]"}})],1):e._e(),"radio"===t.type?i("el-form-item",{attrs:{label:t.label,prop:"新增"===e.winText&&!1===t.isAddPermit||"编辑"===e.winText&&!1===t.isEditPermit?"":t.prop}},e._l(t.option,(function(t){return i("el-radio",{key:t.value,attrs:{size:"mini",label:t.value},model:{value:e.winFormData[t.prop],callback:function(i){e.$set(e.winFormData,t.prop,i)},expression:"winFormData[item.prop]"}},[e._v(e._s(t.label))])})),1):e._e(),"select"===t.type||"select_multiple"===t.type?i("el-form-item",{attrs:{label:t.label,prop:"新增"===e.winText&&!1===t.isAddPermit||"编辑"===e.winText&&!1===t.isEditPermit?"":t.prop}},[i("el-select",{attrs:{placeholder:"请选择"+t.label,size:"mini",filterable:"",remote:t.isRemote,"remote-method":e.remoteMethod,loading:e.loading,multiple:"select_multiple"==t.type,clearable:!0,disabled:"新增"===e.winText&&!1===t.isAddPermit||"编辑"===e.winText&&!1===t.isEditPermit},model:{value:e.winFormData[t.prop],callback:function(i){e.$set(e.winFormData,t.prop,i)},expression:"winFormData[item.prop]"}},[e._l(t.option,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),t.isRemote?i("el-pagination",{staticClass:"select-page",attrs:{"current-page":e.seekData.pageNum,"page-sizes":[10,30,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.pageTotal},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],2)],1):e._e(),"date"===t.type?i("el-form-item",{attrs:{label:t.label,prop:"新增"===e.winText&&!1===t.isAddPermit||"编辑"===e.winText&&!1===t.isEditPermit?"":t.prop}},[i("el-date-picker",{attrs:{type:t.dateType,placeholder:"选择"+t.label,size:"mini","range-separator":"至","start-placeholder":"开始"+t.label,"end-placeholder":"结束"+t.label,"picker-options":t.pickerOptions,"value-format":t.valueFormat,format:t.format},model:{value:e.winFormData[t.prop],callback:function(i){e.$set(e.winFormData,t.prop,i)},expression:"winFormData[item.prop]"}})],1):e._e(),"richtext"===t.type?i("el-form-item",{attrs:{label:t.label,prop:"新增"===e.winText&&!1===t.isAddPermit||"编辑"===e.winText&&!1===t.isEditPermit?"":t.prop}},[i("Tinymce",{attrs:{config:t,requestModel:t.requestModel,height:800},model:{value:e.winFormData[t.prop],callback:function(i){e.$set(e.winFormData,t.prop,i)},expression:"winFormData[item.prop]"}})],1):e._e(),"cascader"===t.type?i("el-form-item",{attrs:{label:t.label,prop:"新增"===e.winText&&!1===t.isAddPermit||"编辑"===e.winText&&!1===t.isEditPermit?"":t.prop}},[i("el-cascader",{attrs:{clearable:!0,size:"mini",placeholder:"请选择"+t.label,options:t.option,filterable:""},model:{value:e.winFormData[t.prop],callback:function(i){e.$set(e.winFormData,t.prop,i)},expression:"winFormData[item.prop]"}})],1):e._e(),"img"===t.type?i("el-form-item",{staticClass:"img-upload-box",attrs:{label:t.label,prop:"新增"===e.winText&&!1===t.isAddPermit||"编辑"===e.winText&&!1===t.isEditPermit?"":t.prop}},[e._l(e.winFormData[t.prop],(function(a,o){return i("div",{key:o,staticClass:"dialog-img"},[i("el-image",{attrs:{"preview-src-list":e.winFormData[t.prop],"z-index":o+1,src:a}}),i("span",{staticClass:"cancel",on:{click:function(i){return e.onRemoveImgItem(t.prop,o)}}},[e._v(" × ")])],1)})),e.winFormData[t.prop]&&e.winFormData[t.prop].length<t.limit?i("el-upload",{staticClass:"picture dialog-img",attrs:{"list-type":"picture-card",accept:".jpg, .png",name:t.requestModel.uploadName,action:t.requestModel.requestFn,"auto-upload":!0,"show-file-list":!1,headers:t.requestModel.uploadHeaders,"on-success":function(i,a,o){return e.handleUploadSuc(t,i,a,o)},"before-upload":function(i,a,o){return e.handleBeforeUpload(t,i,a,o)}}},[i("el-button",{attrs:{size:"mini",plain:"",type:"primary",loading:e.uploadLoadin}},[e._v(" 上传图片 ")])],1):e._e()],2):e._e()],1)})),e._t("form")],2)],1)],1),e._t("dialogForm",null,{formData:e.winFormData}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e._t("dialogButton",null,{formData:e.winFormData}),i("el-button",{attrs:{size:"mini"},on:{click:e.closeFn}},[e._v(" 取消 ")]),i("el-button",{attrs:{plain:"",type:"primary",size:"mini",disabled:e.buttonAct,loading:e.buttonAct},on:{click:function(t){return e.confirmFn("winFormData")}}},[e._v(" 确定 ")])],2)],2)],1)},c=[],d=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"tinymce-container",class:{fullscreen:e.fullscreen},style:{width:e.containerWidth}},[i("textarea",{staticClass:"tinymce-textarea",attrs:{id:e.tinymceId}}),e._v(" "),i("div",{staticClass:"editor-custom-btn-container"},[i("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff",tinymceId:e.tinymceId,requestModel:e.requestModel,config:e.config},on:{successCBK:e.imageSuccessCBK,confirmVideo:e.videoSuccess}})],1)])},p=[],u=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"upload-container"},[i("Preview"),i("el-button",{style:{background:e.color,borderColor:e.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[e._v(" 图片上传 ")]),i("el-dialog",{attrs:{visible:e.dialogVisible,"append-to-body":"",title:"上传图片","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{limit:e.config.limit,accept:".jpg, .png",headers:e.headers,multiple:!0,"file-list":e.fileList,"show-file-list":!0,"on-remove":e.handleRemove,"on-success":e.handleSuccess,"before-upload":e.beforeUpload,action:e.baseUrl,"on-exceed":e.handleExceed,"list-type":"picture-card"}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传")])],1),i("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("确定")])],1)],1)},m=[],h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-upload",disabled:e.disabled},on:{click:e.init}},[e._v("视频上传")]),i("el-dialog",{attrs:{visible:e.show,title:"上传视频","append-to-body":"",width:"400px","close-on-click-modal":!1},on:{"update:visible":function(t){e.show=t}}},[i("el-upload",{attrs:{action:e.baseUrl,headers:e.headers,"show-file-list":!1,"http-request":e.beforeUpload,multiple:!1,disabled:e.disabled,accept:".mp4, .avi, .wmv"}},[i("el-button",{attrs:{type:"primary",size:"mini"}},[e._v("点击上传")]),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[i("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:e.percentage,status:"success"}}),i("div",[e._v("只能上传mp4文件")])],1)],1)],1)],1)},f=[];const g=2097152;function b(e,t,i){const a=t*i,o=Math.min(e.size,a+i),n=e.slice(a,o);return{start:a,end:o,chunk:n}}var w={props:{requestModel:{type:Object,default:{}}},data(){return{percentage:0,disabled:!1,show:!1,headers:this.requestModel.uploadHeaders,baseUrl:this.requestModel.requestFn}},methods:{init(){this.show=!0},beforeUpload(e){const t="video/mp4"==e.file.type,i=e.file.size<107374824;if(t){i||this.$message.error("上传文件不能超过1G"),this.disabled=!0;var a=Math.ceil(e.file.size/g);this.percentage=0,this.uploadChunk({file:e.file,offset:0,count:a,currentChunk:0,size:g,name:null})}else this.$message.error("上传文件格式为mp4")},uploadChunk({file:e,offset:t,count:i,currentChunk:a,size:o,name:n}){var{chunk:s,start:l,end:r}=b(e,a,o);let c=new FormData;var d=new File([e.slice(l,r)],e.name,{type:e.type});c.append("file",d),n&&(c.append("groupName",n[0]),c.append("appenderFileName",n[1])),this.$message.info("尚未完善，敬请期待！")}}},y=w;function v(e,t,i,a,o,n,s,l){var r,c="function"===typeof e?e.options:e;if(t&&(c.render=t,c.staticRenderFns=i,c._compiled=!0),a&&(c.functional=!0),n&&(c._scopeId="data-v-"+n),s?(r=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"===typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),o&&o.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(s)},c._ssrRegister=r):o&&(r=l?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),r)if(c.functional){c._injectStyles=r;var d=c.render;c.render=function(e,t){return r.call(t),d(e,t)}}else{var p=c.beforeCreate;c.beforeCreate=p?[].concat(p,r):[r]}return{exports:e,options:c}}var C=v(y,h,f,!1,null,null,null),D=C.exports,_=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",[i("el-button",{attrs:{type:"success",icon:"el-icon-view",size:"mini"},on:{click:e.init}},[e._v("预览")]),i("el-dialog",{attrs:{visible:e.show,"append-to-body":"",title:"预览","close-on-click-modal":!1,top:"5vh"},on:{"update:visible":function(t){e.show=t}}},[i("div",{staticClass:"select"},[e._v(" 屏幕宽度: "),i("el-select",{attrs:{value:e.swidth},model:{value:e.swidth,callback:function(t){e.swidth=t},expression:"swidth"}},e._l(e.option,(function(e){return i("el-option",{key:e.value,attrs:{value:e.value,label:e.label}})})),1)],1),i("div",{class:e.swidth,domProps:{innerHTML:e._s(e.htmlBody)}})])],1)},k=[],x={data(){return{show:!1,htmlBody:"",swidth:"i5",option:[{value:"i5",label:"iPhone 5"},{value:"i6",label:"iPhone 6/7/8"},{value:"i6P",label:"iPhone 6/7/8 Plus"},{value:"back",label:"后台管理系统"}]}},methods:{init(){this.show=!0,this.htmlBody=window.tinymce.activeEditor.getContent()}}},F=x,S=(i("e667"),v(F,_,k,!1,null,"a46b1070",null)),T=S.exports,$={components:{UploadBtn:D,Preview:T},name:"EditorSlideUpload",props:{color:{type:String,default:"#1890ff"},tinymceId:{type:String},requestModel:{type:Object,default:{}},config:{type:Object,default:{}}},data(){return{dialogVisible:!1,listObj:{},fileList:[],headers:this.requestModel.uploadHeaders,baseUrl:this.requestModel.requestFn}},methods:{uploadSuccess(e){const t=`${Object({NODE_ENV:"production",BASE_URL:"/"}).VUE_APP_BASEURL}/${e.join("/")}`;this.$emit("confirmVideo",t)},checkAllSuccess(){return Object.keys(this.listObj).every(e=>this.listObj[e].hasSuccess)},handleSubmit(){const e=Object.keys(this.listObj).map(e=>this.listObj[e]);this.checkAllSuccess()?(this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图像成功上载。如果有网络问题，请刷新页面并重新上传！")},handleSuccess(e,t){const i=t.uid,a=Object.keys(this.listObj);for(let o=0,n=a.length;o<n;o++)if(this.listObj[a[o]].uid===i){const t=this.requestModel.responseData(e);return void(0==t.code?(this.listObj[a[o]].url=t.path,this.listObj[a[o]].hasSuccess=!0):this.$message.error(t.msg))}},handleExceed(e,t){this.$message("图片数量超过限制，如需更换，请删除再上传！")},handleRemove(e){const t=e.uid,i=Object.keys(this.listObj);for(let a=0,o=i.length;a<o;a++)if(this.listObj[i[a]].uid===t)return void delete this.listObj[i[a]]},beforeUpload(e){const t=this,i=window.URL||window.webkitURL,a=e.uid;return this.listObj[a]={},new Promise((o,n)=>{const s=new Image;s.src=i.createObjectURL(e),s.onload=function(){t.listObj[a]={hasSuccess:!1,uid:e.uid,width:this.width,height:this.height}},o(!0)})}}},q=$,M=(i("251c"),v(q,u,m,!1,null,"601dbfdc",null)),O=M.exports;const j=["advlist anchor autolink autosave code codesample colorpicker colorpicker contextmenu directionality emoticons fullscreen hr image imagetools insertdatetime link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"];var z=j;const L=["searchreplace bold italic underline strikethrough alignleft aligncenter alignright outdent indent  blockquote undo redo removeformat subscript superscript code codesample","hr bullist numlist link image charmap preview anchor pagebreak insertdatetime media table emoticons forecolor backcolor fullscreen"];var E=L;let P=[];function R(){return window.tinymce}const V=(e,t)=>{const i=document.getElementById(e),a=t||function(){};if(!i){const t=document.createElement("script");t.src=e,t.id=e,document.body.appendChild(t),P.push(a);const i="onload"in t?o:n;i(t)}function o(t){t.onload=function(){this.onerror=this.onload=null;for(const e of P)e(null,t);P=null},t.onerror=function(){this.onerror=this.onload=null,a(new Error("Failed to load "+e),t)}}function n(e){e.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState){this.onreadystatechange=null;for(const t of P)t(null,e);P=null}}}i&&a&&(R()?a(null,i):P.push(a))};var A=V;const W="https://cdn.jsdelivr.net/npm/tinymce-all-in-one@4.9.3/tinymce.min.js";var I={name:"Tinymce",components:{editorImage:O},props:{id:{type:String,default:function(){return"vue-tinymce-"+ +new Date+(1e3*Math.random()).toFixed(0)}},value:{type:String,default:""},toolbar:{type:Array,required:!1,default(){return[]}},menubar:{type:String,default:"file edit insert view format table"},height:{type:[Number,String],required:!1,default:360},width:{type:[Number,String],required:!1,default:"auto"},obj:{type:Object,required:!1},requestModel:{type:Object,default:{}},config:{type:Object,default:{}}},data(){return{hasChange:!1,hasInit:!1,tinymceId:this.id,fullscreen:!1,languageTypeList:{en:"en",zh:"zh_CN",es:"es_MX",ja:"ja"}}},computed:{containerWidth(){const e=this.width;return/^[\d]+(\.[\d]+)?$/.test(e)?e+"px":e}},watch:{value(e){!this.hasChange&&this.hasInit&&this.$nextTick(()=>window.tinymce.get(this.tinymceId).setContent(e||""))}},mounted(){this.init()},activated(){window.tinymce&&this.initTinymce()},deactivated(){this.destroyTinymce()},destroyed(){this.destroyTinymce()},methods:{init(){A(W,e=>{e?this.$message.error(e.message):this.initTinymce()})},initTinymce(){const e=this;window.tinymce.init({selector:"#"+this.tinymceId,auto_focus:!0,language:this.languageTypeList["zh"],height:this.height,fontsize_formats:"12px 14px 18px 24px 36px",body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:E,menubar:this.menubar,plugins:z,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,convert_urls:!1,nonbreaking_force_tab:!0,init_instance_callback:t=>{e.value&&t.setContent(e.value),e.hasInit=!0,t.on("NodeChange Change KeyUp SetContent",()=>{this.hasChange=!0,this.$emit("input",t.getContent())})},setup(t){t.on("FullscreenStateChanged",t=>{e.fullscreen=t.state})}})},destroyTinymce(){const e=window.tinymce.get(this.tinymceId);this.fullscreen&&e.execCommand("mceFullScreen"),e&&e.destroy()},setContent(e){window.tinymce.get(this.tinymceId).setContent(e)},getContent(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK(e){const t=this;e.forEach(e=>{window.tinymce.get(t.tinymceId).insertContent(`<img class="wscnph" src="${e.url}" />`)})},videoSuccess(e){const t=this;window.tinymce.get(t.tinymceId).insertContent(`<video width="100%" height="300" src='${e}' controls="controls"></video>`)}}},N=I,U=(i("bb3a"),v(N,d,p,!1,null,"2d7faa28",null)),B=U.exports,H={name:"general-dialog",components:{Tinymce:B},props:["showWindow","formData","addOrSet","modelConf"],data(){return{buttonAct:!1,showFormBox:!1,resumeBeginDate:[],winFormData:{},formDataName:"",winText:"-",uploadLoadin:!1,loading:!1,seekData:{pageNum:1,pageSize:10},pageTotal:0}},watch:{showWindow:{handler(e,t){this.showFormBox=e,!0===e&&(this.formDataName=this.$refs["winFormData"],this.formDataName&&this.formDataName.resetFields(),1===this.addOrSet?(this.winText="新增",this.winFormData={...this.formData}):2===this.addOrSet&&(this.winText="编辑",this.winFormData={...this.formData}))},immediate:!0}},methods:{async handleUploadSuc(e,t,i,a){const o=e.requestModel.responseData(t);0===o.code?(this.winFormData[e.prop]=this.winFormData[e.prop]||[],this.winFormData[e.prop]=[...this.winFormData[e.prop],o.path],this.uploadLoadin=!1,this.$message({showClose:!0,message:o.msg||"上传成功",type:"success"})):this.$message({showClose:!0,message:o.msg||"上传失败",type:"error"})},handleSizeChange(e){this.seekData["pageSize"]=e,this.remoteMethod(this.remoteVal)},handleCurrentChange(e){this.seekData["pageNum"]=e,this.remoteMethod(this.remoteVal)},handleBeforeUpload(e){return!this.winFormData[e.prop]||(e.limit<=this.winFormData[e.prop].length?(this.$message({showClose:!0,message:`只能上传${e.limit}张图片`,type:"error"}),!1):(this.uploadLoadin=!0,!0))},onRemoveImgItem(e,t){this.winFormData[e].splice(t,1)},async setDataFn(e){if(1===this.addOrSet){let t=await this.modelConf.butRequestModel.requestData(e,this.modelConf);if(!1===t)return;this.buttonAct=!0,this.modelConf.butRequestModel.requestFn(t).then(e=>{this.buttonAct=!1;let t=this.modelConf.butRequestModel.responseData(e);0===t.code?(this.$message({showClose:!0,message:t.msg,type:"success"}),this.$emit("setTableList",!0),this.$emit("winCancelFn",!1)):this.$message({showClose:!0,message:t.msg,type:"error"})}).catch(e=>{console.error(e)})}else if(2===this.addOrSet){let t=await this.modelConf.butRequestModel.requestData(e,this.modelConf);if(!1===t)return;this.buttonAct=!0,this.modelConf.butRequestModel.requestFn(t).then(e=>{this.buttonAct=!1;let t=this.modelConf.butRequestModel.responseData(e);0===t.code?(this.$message({showClose:!0,message:t.msg,type:"success"}),this.$emit("setTableList",!0),this.$emit("winCancelFn",!1)):this.$message({showClose:!0,message:t.msg,type:"error"})}).catch(e=>{console.error(e)})}},remoteMethod(e){if(this.remoteVal=e,!1===this.loading){console.log(this.modelConf.formConfig);const t=this.modelConf.formConfig.filter(e=>"select"===e.type&&!0===e.isRemote);if(t.length>0){this.loading=!0;const i=t[0].requestModel,a=i.requestData({remoteValue:e,...this.winFormData,...this.seekData});!1!==a?i.requestFn(a).then(e=>{const a=i.responseData(e);t[0].option=a.list,this.pageTotal=a.total,this.loading=!1}):this.loading=!1}}return[]},confirmFn(e){this.$refs[e].validate(e=>{if(!e)return this.$message({showClose:!0,message:"请检查输入内容！",type:"error"}),!1;this.setDataFn(this.winFormData)})},closeFn(){this.$emit("winCancelFn",!1)}}},K=H,X=v(K,r,c,!1,null,null,null),G=X.exports;const J=e=>{let t={tableConfig:e.tableConf,seekConfig:[],formConfig:[],formRules:{},formData:{},...e};return e.formConf.forEach(e=>{!1!==e.isSeek&&(console.log(e.format),t.seekConfig.push({label:e.label,type:e.type?e.type:"text",prop:e.prop,maxlength:e.maxlength?e.maxlength:32,option:e.option,dateType:e.dateType||"",pickerOptions:e.pickerOptions,format:e.format||"yyyy-MM-dd"})),!1!==e.isForm&&(t.formConfig.push({label:e.label,type:e.type?e.type:"text",prop:e.prop,maxlength:e.maxlength?e.maxlength:32,option:e.option,isAddPermit:e.isAddPermit,isEditPermit:e.isEditPermit,isRemote:e.isRemote,required:!1!==e.required,limit:e.limit?e.limit:1,dateType:e.dateType||"",pickerOptions:e.pickerOptions,requestModel:e.requestModel,valueFormat:e.valueFormat||"yyyy-MM-dd",format:e.format||"yyyy-MM-dd",span:e.span||24}),t.formRules[e.prop]=[{required:!1!==e.required,message:e.label+"不能为空",trigger:e.trigger}],t.formData[e.prop]="img"==e.type?[]:"")}),t.viewConf?(t.viewConf.formLabelWidth=t.viewConf.formLabelWidth,t.viewConf.tableMaxHeight=t.viewConf.tableMaxHeight):t.viewConf={formLabelWidth:"80px",tableMaxHeight:"500px"},t};var Q={name:"GeneralModel",props:{buttonConf:{type:Array,default:()=>[]},tableConf:{type:Array,default:()=>[]},formConf:{type:Array,default:()=>[]}},computed:{},components:{WindowModule:G},data(){return{tableData:[],isShowWindow:!1,pageTotal:0,addOrSet:0,centerDialogVisible:!1,remindWinData:{},selectTableData:[],isReqLoading:!1,roleList:[],dialogFormData:{},previewData:{title:"",data:"",isShow:!1},topSort:{isShow:!1,title:"置顶排序",data:[],butConf:{}},topSortApi:{},seekData:{pageNum:1,pageSize:10},remindWinConf:{title:"",msg:"",code:""}}},computed:{modelConf(){return J({buttonConf:this.buttonConf,tableConf:this.tableConf,formConf:this.formConf})}},methods:{seekDataFn(e){this.seekData={...this.seekData},this.seekData.pageNum=1,this.isReqLoading=!0,this.getListDataFn(this.seekData)},getListDataFn(e){const t=this.modelConf.buttonConf.filter(e=>"search"===e.name)[0].requestModel;let i=t.requestData(e);t.requestFn(i).then(async e=>{const i=t.responseData(e);this.isReqLoading=!1,0===i.code?(this.pageTotal=i.total,this.tableData=i.list):this.$message({showClose:!0,message:i.msg,type:"error"})}).catch(e=>{console.error(e)})},async changeStatus(e,t){for(let s in t.activeValue)t.activeValue[s].code==e[t.prop]&&(this.switchDialog.title="是否"+t.activeText);for(let s in t.inactiveValue)t.inactiveValue[s].code==e[t.prop]&&(this.switchDialog.title="是否"+t.inactiveText);this.editList=e,this.editSwitch=t;const{requestFn:i,responseData:a,requestData:o,specialValue:n}=this.editSwitch.queryOneData.requestModel;i(await o(this.editList)).then(async e=>{const t=await a(e);if(0===t.code){if(n.length>0)for(let i in n)this.editList[n[i].value]=t.data[n[i].value]}else this.$message({showClose:!0,message:e.msg,type:"error"})}).finally(()=>{}),this.switchFlag=!0},onDialogForm(e,t){this.modelConf.butRequestModel=t.requestModel,"update"===t.name?(this.addOrSet=2,this.isShowWindow=!0,this.dialogFormData=Object.assign({},e)):"add"===t.name?(this.addOrSet=1,this.isShowWindow=!0,this.dialogFormData=Object.assign({},this.modelConf.formData)):"preview"===t.name?this.previewData={title:"预览",isShow:!0,data:e,butConf:t}:!1!==t.isShowRemindWin&&(this.centerDialogVisible=!0,this.remindWinData=e,this.remindWinConf=t.remindWinConf)},selectFn(e){this.selectTableData=e},getSelectTableDataFn(){0===this.selectTableData.length?this.$message({showClose:!0,message:"请选择需要批量处理的数据",type:"error"}):this.$emit("batchList",this.selectTableData)},confirmDeleteFn(){const e=this.modelConf.butRequestModel;if(e){const{requestFn:t,responseData:i,requestData:a}=e;t(a(this.remindWinData)).then(async e=>{const t=await i(e);0===t.code?(this.$message({showClose:!0,message:e.msg,type:"success"}),this.getListDataFn(this.seekData),this.centerDialogVisible=!1):this.$message({showClose:!0,message:e.msg,type:"error"})})}},cancelDeleteFn(){this.centerDialogVisible=!1,this.$message({showClose:!0,message:"取消操作"})},handleSizeChange(e){this.seekData["pageSize"]=e,this.getListDataFn(this.seekData)},handleCurrentChange(e){this.seekData["pageNum"]=e,this.getListDataFn(this.seekData)},getWindowCancelFn(e){this.isShowWindow=e},setTableList(e){!0===e&&this.getListDataFn(this.seekData)}},created(){this.getListDataFn(this.seekData)}},Y=Q,Z=v(Y,s,l,!1,null,null,null),ee=Z.exports;i("c4ea");function te(e){var t=[ee];t.forEach((function(t){t.install?e.use(t):t.name&&e.component(t.name,t)}))}"undefined"!==typeof window&&window.Vue&&te(window.Vue);var ie={install:te};t["default"]=ie}})}));